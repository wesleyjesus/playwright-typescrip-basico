<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Playwright TypeScript - Projeto de Testes</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.5.0/github-markdown.min.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    }
    .container {
      max-width: 980px;
      margin: 0 auto;
      padding: 45px;
    }
    .header {
      background: white;
      border-radius: 20px 20px 0 0;
      padding: 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .header h1 {
      margin: 0;
      color: #667eea;
      font-size: 2.5rem;
    }
    .header .subtitle {
      color: #666;
      font-size: 1.1rem;
      margin-top: 10px;
    }
    .allure-button {
      display: inline-block;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white !important;
      padding: 15px 40px;
      border-radius: 50px;
      text-decoration: none;
      font-size: 1.1rem;
      font-weight: 600;
      margin: 20px 0;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }
    .allure-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
    }
    .markdown-body {
      background: white;
      padding: 45px;
      border-radius: 0 0 20px 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    .markdown-body h1:first-child {
      display: none;
    }
    .markdown-body img[alt*="badge"] {
      display: inline-block;
      margin: 5px;
    }
    @media (max-width: 768px) {
      .container {
        padding: 20px;
      }
      .header, .markdown-body {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üé≠ Playwright TypeScript</h1>
      <p class="subtitle">Projeto de Testes Automatizados End-to-End</p>
      <a href="allure-report/index.html" class="allure-button">
        üìä Ver Relat√≥rio Allure
      </a>
    </div>
    <div class="markdown-body">
<p><h1>Playwright TypeScript - Configura√ß√£o Completa üé≠</h1></p><p><a href="https://github.com/wesleyjesus/playwright-typescrip-basico/actions/workflows/playwright-allure.yml/badge.svg">![Playwright Tests</a>](https://github.com/wesleyjesus/playwright-typescrip-basico/actions/workflows/playwright-allure.yml)<br><a href="https://img.shields.io/badge/Allure-Report-yellow.svg">![Allure Report</a>](https://wesleyjesus.github.io/playwright-typescrip-basico/allure-report/)<br><a href="https://img.shields.io/badge/GitHub-Pages-blue.svg">![GitHub Pages</a>](https://wesleyjesus.github.io/playwright-typescrip-basico/)</p><p>Este projeto fornece um ambiente completo de desenvolvimento e teste com Playwright, incluindo:</p><p><ul><li>‚úÖ <strong>DevContainer</strong> configurado com permiss√µes autom√°ticas</li><br><li>‚úÖ <strong>Oh My Zsh</strong> com tema e plugins produtivos</li><br><li>‚úÖ <strong>Allure Report</strong> para relat√≥rios visuais detalhados</li><br><li>‚úÖ <strong>GitHub Pages</strong> para publica√ß√£o autom√°tica de relat√≥rios</li><br><li>‚úÖ <strong>Aliases personalizados</strong> para agilizar o desenvolvimento</li><br><li>‚úÖ <strong>Dual package manager</strong> (npm/yarn) support</li><br><li>‚úÖ <strong>Suporte para desenvolvimento local</strong> (VS Code e Eclipse)</li></p><p><h2>üìä Relat√≥rios Allure Publicados</h2></p><p>üîó <strong>P√°gina Inicial do Projeto</strong>: <a href="https://wesleyjesus.github.io/playwright-typescrip-basico/">https://wesleyjesus.github.io/playwright-typescrip-basico/</a></p><p>üîó <strong>Relat√≥rio Allure Direto</strong>: <a href="https://wesleyjesus.github.io/playwright-typescrip-basico/allure-report/">https://wesleyjesus.github.io/playwright-typescrip-basico/allure-report/</a></p><p>Os relat√≥rios s√£o automaticamente atualizados a cada push para <code>main</code>.</p><p><h2>üì¶ Gerenciador de Pacotes</h2></p><p>Este projeto usa <strong>Yarn</strong> como gerenciador de pacotes principal. Todos os comandos de exemplo utilizam Yarn.</p><p><pre><code class="language-bash"><h1>Instalar depend√™ncias</h1><br>yarn install</p><p><h1>Adicionar nova depend√™ncia</h1><br>yarn add <pacote></p><p><h1>Adicionar depend√™ncia de desenvolvimento</h1><br>yarn add -D <pacote></p><p><h1>Atualizar pacotes</h1><br>yarn upgrade</p><p><h1>Atualizar Playwright para a vers√£o mais recente</h1><br>yarn upgrade @playwright/test@latest<br>npx playwright install<br></code></pre></p><p>> <strong>Nota</strong>: O projeto possui <a href="yarn.lock"><code>yarn.lock</code></a>. N√£o use <code>npm install</code> para evitar conflitos entre gerenciadores.</p><p><h2>üöÄ In√≠cio R√°pido</h2></p><p><h3>Op√ß√£o 1: Usando DevContainer (Recomendado)</h3></p><p>#### 1. Abrir no DevContainer</p><p><pre><code class="language-bash"><h1>No VS Code, use Command Palette:</h1><br><h1>> Dev Containers: Reopen in Container</h1><br></code></pre></p><p>#### 2. Instalar Depend√™ncias</p><p><pre><code class="language-bash"><h1>Instalar todas as depend√™ncias do projeto</h1><br>yarn install</p><p><h1>Instalar navegadores do Playwright</h1><br>npx playwright install<br></code></pre></p><p>#### 3. Verificar Configura√ß√£o</p><p><pre><code class="language-bash"><h1>Executar teste de verifica√ß√£o do ambiente:</h1><br>./test-zsh-setup.sh</p><p><h1>Mudar para zsh (se necess√°rio):</h1><br>zsh</p><p><h1>Testar aliases:</h1><br>pwtest  # Executa testes Playwright<br>pclean  # Limpa relat√≥rios Allure<br>pallure # Executa testes e abre Allure<br></code></pre></p><p><h3>Op√ß√£o 2: Desenvolvimento Local (Sem DevContainer)</h3></p><p>#### Pr√©-requisitos</p><p>Antes de come√ßar, certifique-se de ter instalado:</p><p>1. <strong>Node.js</strong> (vers√£o 18 ou superior)<br>   - <a href="https://nodejs.org/">Download Node.js</a><br>   - Verificar instala√ß√£o: <code>node --version</code></p><p>2. <strong>Yarn</strong> (gerenciador de pacotes)<br>   <pre><code class="language-bash">   npm install -g yarn<br>   </code></pre></p><p>3. <strong>Java</strong> (para Allure Report)<br>   - <a href="https://adoptium.net/">Download OpenJDK 17</a><br>   - Verificar instala√ß√£o: <code>java -version</code></p><p>4. <strong>Git</strong><br>   - <a href="https://git-scm.com/">Download Git</a></p><p>#### Configura√ß√£o no VS Code</p><p>1. <strong>Clonar o reposit√≥rio</strong>:<br>   <pre><code class="language-bash">   git clone <url-do-repositorio><br>   cd <nome-do-projeto><br>   </code></pre></p><p>2. <strong>Instalar depend√™ncias</strong>:<br>   <pre><code class="language-bash">   yarn install<br>   </code></pre></p><p>3. <strong>Instalar navegadores do Playwright</strong>:<br>   <pre><code class="language-bash">   npx playwright install<br>   </code></pre></p><p>4. <strong>Instalar Allure CLI globalmente</strong>:<br>   <pre><code class="language-bash">   yarn global add allure-commandline<br>   <br>   # Ou com npm:<br>   npm install -g allure-commandline<br>   </code></pre></p><p>5. <strong>Configurar ambiente Java headless</strong> (opcional, para Allure):<br>   <br>   <strong>Linux/macOS</strong>:<br>   <pre><code class="language-bash">   export JAVA_OPTS="-Djava.awt.headless=true"<br>   export DISPLAY=:99<br>   </code></pre><br>   <br>   <strong>Windows</strong>:<br>   <pre><code class="language-powershell">   $env:JAVA_OPTS="-Djava.awt.headless=true"<br>   </code></pre></p><p>6. <strong>Executar testes</strong>:<br>   <pre><code class="language-bash">   yarn test:e2e<br>   </code></pre></p><p>7. <strong>Abrir relat√≥rio Allure</strong>:<br>   <pre><code class="language-bash">   yarn allure:serve<br>   </code></pre></p><p>#### Configura√ß√£o no Eclipse</p><p>O Eclipse n√£o possui suporte nativo para TypeScript/Playwright, mas voc√™ pode configur√°-lo para trabalhar com o projeto:</p><p>1. <strong>Instalar Node.js e Yarn</strong> (conforme pr√©-requisitos acima)</p><p>2. <strong>Importar projeto no Eclipse</strong>:<br>   - File ‚Üí Import ‚Üí General ‚Üí Existing Projects into Workspace<br>   - Selecione o diret√≥rio do projeto<br>   - Click em Finish</p><p>3. <strong>Instalar plugin Wild Web Developer</strong>:<br>   - Help ‚Üí Eclipse Marketplace<br>   - Buscar por "Wild Web Developer"<br>   - Instalar o plugin (suporte para TypeScript, JSON, YAML)</p><p>4. <strong>Configurar Terminal Integrado</strong>:<br>   - Window ‚Üí Show View ‚Üí Terminal<br>   - No terminal, navegar at√© a raiz do projeto</p><p>5. <strong>Instalar depend√™ncias via Terminal</strong>:<br>   <pre><code class="language-bash">   yarn install<br>   npx playwright install<br>   yarn global add allure-commandline<br>   </code></pre></p><p>6. <strong>Executar testes via Terminal</strong>:<br>   <pre><code class="language-bash">   yarn test:e2e<br>   </code></pre></p><p>7. <strong>Visualizar relat√≥rios</strong>:<br>   <pre><code class="language-bash">   yarn allure:serve<br>   </code></pre></p><p>#### Alternativa: Usar Eclipse com Terminal Externo</p><p>Se preferir n√£o usar o terminal integrado:</p><p>1. <strong>Abrir terminal externo</strong> (CMD, PowerShell, Bash)<br>2. <strong>Navegar at√© o projeto</strong>:<br>   <pre><code class="language-bash">   cd caminho/do/projeto<br>   </code></pre><br>3. <strong>Executar comandos normalmente</strong>:<br>   <pre><code class="language-bash">   yarn install<br>   yarn test:e2e<br>   yarn allure:serve<br>   </code></pre></p><p>#### Estrutura de Diret√≥rios para IDEs</p><p><pre><code class="language-">projeto/<br>‚îú‚îÄ‚îÄ .vscode/              # Configura√ß√µes do VS Code<br>‚îÇ   ‚îú‚îÄ‚îÄ settings.json<br>‚îÇ   ‚îî‚îÄ‚îÄ mcp.json<br>‚îú‚îÄ‚îÄ tests/                # Testes Playwright<br>‚îú‚îÄ‚îÄ playwright.config.ts  # Configura√ß√£o do Playwright<br>‚îú‚îÄ‚îÄ package.json          # Depend√™ncias do projeto<br>‚îú‚îÄ‚îÄ yarn.lock             # Lock file do Yarn<br>‚îî‚îÄ‚îÄ allure-results/       # Resultados dos testes<br></code></pre></p><p>#### Extens√µes Recomendadas para VS Code</p><p>Instale estas extens√µes para melhor experi√™ncia de desenvolvimento:</p><p>1. <strong>Playwright Test for VSCode</strong> (<code>ms-playwright.playwright</code>)<br>   - Execu√ß√£o visual de testes<br>   - Debugging integrado<br>   - IntelliSense para Playwright</p><p>2. <strong>ESLint</strong> (<code>dbaeumer.vscode-eslint</code>)<br>   - Linting de c√≥digo</p><p>3. <strong>Prettier</strong> (<code>esbenp.prettier-vscode</code>)<br>   - Formata√ß√£o de c√≥digo</p><p>4. <strong>TypeScript Hero</strong> (<code>rbbit.typescript-hero</code>)<br>   - Organiza√ß√£o de imports</p><p>Para instalar rapidamente:<br><pre><code class="language-bash">code --install-extension ms-playwright.playwright<br>code --install-extension dbaeumer.vscode-eslint<br>code --install-extension esbenp.prettier-vscode<br>code --install-extension rbbit.typescript-hero<br></code></pre></p><p>#### Troubleshooting - Desenvolvimento Local</p><p><strong>Problema: <code>yarn: command not found</code></strong><br><pre><code class="language-bash">npm install -g yarn<br></code></pre></p><p><strong>Problema: Navegadores n√£o encontrados</strong><br><pre><code class="language-bash">npx playwright install<br>npx playwright install-deps  # Linux: instala depend√™ncias do sistema<br></code></pre></p><p><strong>Problema: Allure n√£o encontrado</strong><br><pre><code class="language-bash">yarn global add allure-commandline<br><h1>Verificar PATH global do Yarn</h1><br>yarn global bin<br><h1>Adicionar ao PATH se necess√°rio</h1><br></code></pre></p><p><strong>Problema: Java n√£o encontrado (Allure)</strong><br><li>Instalar OpenJDK 17 ou superior</li><br><li>Configurar vari√°vel de ambiente <code>JAVA_HOME</code></li></p><p><strong>Problema: Permiss√µes no Windows</strong><br><pre><code class="language-powershell"><h1>Executar PowerShell como Administrador</h1><br>Set-ExecutionPolicy RemoteSigned -Scope CurrentUser<br></code></pre></p><p><strong>Problema: Porta 4040 em uso (Allure)</strong><br><pre><code class="language-bash"><h1>Parar servidor existente</h1><br>yarn allure:stop</p><p><h1>Ou usar porta diferente</h1><br>./manage-allure.sh 4041 serve<br></code></pre></p><p><h2>üéØ Scripts Dispon√≠veis</h2></p><p><h3>Testes Playwright</h3></p><p><pre><code class="language-bash">yarn test:e2e          # Executa todos os testes<br>yarn test:headed       # Executa com interface gr√°fica<br>yarn test:debug        # Modo debug com PWDEBUG<br>yarn codegen           # Gera c√≥digo de teste automaticamente<br></code></pre></p><p><h3>Allure Reports</h3></p><p>#### üìä Relat√≥rios Publicados (GitHub Pages)</p><p>üîó <strong>Acesse ao vivo:</strong> <a href="https://wesleyjesus.github.io/playwright-typescrip-basico/">https://wesleyjesus.github.io/playwright-typescrip-basico/</a></p><p><pre><code class="language-bash"><h1>Deploy r√°pido - executa testes e publica no GitHub Pages</h1><br>./deploy-allure.sh "mensagem do commit"</p><p><h1>Ver ajuda r√°pida sobre GitHub Pages</h1><br>./allure-pages-help.sh</p><p><h1>Ver documenta√ß√£o completa</h1><br>cat .github/ALLURE_GITHUB_PAGES.md<br></code></pre></p><p>#### üñ•Ô∏è Relat√≥rios Locais</p><p><pre><code class="language-bash">yarn allure:serve      # Executa testes e abre relat√≥rio<br>yarn allure:clean      # Limpa resultados anteriores<br>yarn allure:generate   # Gera relat√≥rio sem abrir<br>yarn allure:open       # Abre relat√≥rio existente<br>yarn allure:stop       # Para servidor Allure<br>yarn allure:status     # Verifica status do servidor<br>yarn test:allure       # Executa testes + abre relat√≥rio<br>yarn test:allure-clean # Limpa + executa testes + abre relat√≥rio<br>yarn test:ci           # Executa testes no modo CI (para GitHub Actions)<br></code></pre></p><p>> <strong>üìù Nota</strong>: O workflow do GitHub Actions publica automaticamente os relat√≥rios a cada push para <code>main</code>.</p><p><h3>Aliases √öteis (Oh My Zsh - apenas DevContainer)</h3></p><p><pre><code class="language-bash"><h1>Playwright</h1><br>pw                      # npx playwright<br>pwtest                  # npx playwright test<br>pwcodegen              # npx playwright codegen<br>pwshow                 # npx playwright show-report</p><p><h1>Gest√£o de projetos</h1><br>ptest                  # yarn test:e2e<br>pcodegen               # yarn codegen<br>pallure                # yarn allure:serve<br>pclean                 # yarn allure:clean</p><p><h1>Allure direto</h1><br>allure-serve           # yarn allure:serve<br>allure-clean           # yarn allure:clean<br>allure-generate        # yarn allure:generate<br>allure-open            # yarn allure:open<br></code></pre></p><p>> <strong>Nota</strong>: Os aliases acima funcionam apenas dentro do DevContainer. No desenvolvimento local, use os comandos completos.</p><p><h2>üîß Resolu√ß√£o de Problemas</h2></p><p><h3>Problema de Permiss√µes EACCES</h3></p><p>Se encontrar erros de permiss√£o ao salvar arquivos:</p><p><strong>No host (fora do container):</strong></p><p><pre><code class="language-bash"><h1>Verificar atributos dos arquivos</h1><br>lsattr .devcontainer/</p><p><h1>Corrigir permiss√µes se necess√°rio</h1><br>chmod -R a+rwX .devcontainer/<br></code></pre></p><p><strong>No container:</strong></p><p><pre><code class="language-bash"><h1>Corrigir permiss√µes do Allure</h1><br>sudo chown -R $(id -u):$(id -g) allure-results allure-report</p><p><h1>Ou use o comando de limpeza que inclui sudo:</h1><br>yarn allure:clean<br></code></pre></p><p><h3>Oh My Zsh n√£o carregado</h3></p><p><pre><code class="language-bash"><h1>Verificar se est√° usando zsh</h1><br>echo $SHELL</p><p><h1>Mudar para zsh se necess√°rio</h1><br>zsh</p><p><h1>Recarregar configura√ß√£o</h1><br>source ~/.zshrc</p><p><h1>Verificar instala√ß√£o</h1><br>./test-zsh-setup.sh<br></code></pre></p><p><h3>Servidor Allure com problemas</h3></p><p><pre><code class="language-bash"><h1>Verificar status</h1><br>yarn allure:status</p><p><h1>Reiniciar servidor</h1><br>yarn allure:restart</p><p><h1>Parar servidor manualmente</h1><br>yarn allure:stop</p><p><h1>Verificar portas em uso</h1><br>./manage-allure.sh 4040 status<br></code></pre></p><p><h2>üé≠ Playwright Codegen</h2></p><p>Este projeto inclui scripts para facilitar o uso do Playwright Codegen para grava√ß√£o de testes.</p><p><h3>Usando Yarn</h3></p><p><pre><code class="language-bash"><h1>Abrir codegen com configura√ß√µes padr√£o</h1><br>yarn codegen</p><p><h1>Abrir codegen em uma URL espec√≠fica</h1><br>npx playwright codegen https://exemplo.com.br<br></code></pre></p><p><h3>Usando o script personalizado (DevContainer)</h3></p><p><pre><code class="language-bash"><h1>Usar configura√ß√µes padr√£o (example.com, chromium)</h1><br>./codegen.sh</p><p><h1>Especificar URL</h1><br>./codegen.sh https://google.com</p><p><h1>Especificar URL e browser</h1><br>./codegen.sh https://google.com firefox</p><p><h1>Usar op√ß√µes adicionais</h1><br>./codegen.sh https://google.com chromium --ignore-https-errors<br></code></pre></p><p><h3>Op√ß√µes √∫teis do Playwright Codegen</h3></p><p><li><code>--browser=chromium|firefox|webkit</code> - Escolher o browser</li><br><li><code>--device="iPhone 12"</code> - Emular dispositivo espec√≠fico</li><br><li><code>--viewport-size=1920,1080</code> - Definir tamanho da viewport</li><br><li><code>--ignore-https-errors</code> - Ignorar erros de HTTPS</li><br><li><code>--save-storage=auth.json</code> - Salvar estado de autentica√ß√£o</li><br><li><code>--load-storage=auth.json</code> - Carregar estado de autentica√ß√£o</li></p><p><h3>Exemplos avan√ßados</h3></p><p><pre><code class="language-bash"><h1>Codegen para mobile</h1><br>npx playwright codegen --device="iPhone 12" https://google.com</p><p><h1>Codegen com autentica√ß√£o salva</h1><br>npx playwright codegen --load-storage=auth.json https://app.exemplo.com</p><p><h1>Codegen em modo escuro</h1><br>npx playwright codegen --color-scheme=dark https://exemplo.com<br></code></pre></p><p><h2>üìù Observa√ß√µes</h2></p><p><li>A imagem base do Playwright fornece navegadores e depend√™ncias do sistema, mas √© importante que a vers√£o do <code>@playwright/test</code> no <code>package.json</code> esteja alinhada com a imagem Docker (aqui usamos <code>1.55.0</code>).</li><br><li>Para maior seguran√ßa ao rodar Chromium com sandbox habilitado, considere usar o <code>seccomp_profile.json</code> recomendado pela documenta√ß√£o do Playwright e rodar o container com <code>--security-opt seccomp=./seccomp_profile.json</code>.</li></p><p><h2>üîÑ Pr√≥ximos passos</h2></p><p><li>Adicionar exemplos de testes em <code>tests/</code> e configura√ß√£o <code>playwright.config.ts</code>.</li><br><li>Integrar comandos de CI (GitHub Actions) para rodar os testes automaticamente.</li></p><p><h2>üîê Corrigindo permiss√µes no host</h2></p><p>Se ao abrir o Dev Container voc√™ receber erros de permiss√£o (EACCES) ao salvar arquivos em <code>.devcontainer</code> ou no projeto, execute no host (fora do cont√™iner):</p><p><pre><code class="language-bash"><h1>Torna o script execut√°vel (uma vez)</h1><br>chmod +x .devcontainer/fix-host-perms.sh</p><p><h1>Executa o script (pedir√° confirma√ß√£o e sudo)</h1><br>.devcontainer/fix-host-perms.sh<br></code></pre></p><p>O script ir√°:</p><p><li>Salvar o estado atual do diret√≥rio em <code>.devcontainer/perms-before.txt</code>.</li><br><li>Executar <code>sudo chown -R pwuser:pwuser /home/pwuser/app</code>.</li><br><li>Aplicar <code>chmod -R u+rwX /home/pwuser/app</code>.</li><br><li>Salvar o estado final em <code>.devcontainer/perms-after.txt</code>.</li></p><p>Depois, reabra/reconstrua o Dev Container no VS Code.</p><p>Se voc√™ preferir n√£o alterar propriet√°rio, considere usar <code>chmod -R a+rwX /home/pwuser/app</code> no host ‚Äî isso √© menos seguro, mas r√°pido.</p><p><h3>Comandos √∫teis usados para diagn√≥stico e corre√ß√£o</h3></p><p>Antes de alterar permiss√µes, √© √∫til inspecionar atributos estendidos (por exemplo, atributo imut√°vel <code>i</code>):</p><p><pre><code class="language-bash"><h1>Verifica se o diret√≥rio tem o atributo imut√°vel (i)</h1><br>lsattr -d /home/pwuser/app /home/pwuser/app/.devcontainer</p><p><h1>Lista atributos dos arquivos dentro de .devcontainer</h1><br>lsattr /home/pwuser/app/.devcontainer/*<br></code></pre></p><p>Se n√£o houver atributo <code>i</code> (imut√°vel), os comandos abaixo ajustam permiss√µes para permitir grava√ß√£o:</p><p><pre><code class="language-bash"><h1>Torna todos arquivos e pastas grav√°veis por todos os usu√°rios (mais aberto)</h1><br>sudo chmod -R a+rwX /home/pwuser/app</p><p><h1>Alternativa mais restrita (aplica permiss√£o apenas ao dono)</h1><br>sudo chmod -R u+rwX /home/pwuser/app<br></code></pre></p><p>Aviso: usar <code>a+rwX</code> concede permiss√µes amplas (a todos os usu√°rios). Prefira <code>u+rwX</code> sempre que poss√≠vel.</p><p><h3>Ajuste autom√°tico ao iniciar o cont√™iner</h3></p><p>O Dev Container agora inclui um <code>entrypoint</code> (<code>.devcontainer/entrypoint.sh</code>) que tenta ajustar automaticamente a propriedade dos arquivos montados para o usu√°rio <code>pwuser</code> no momento da inicializa√ß√£o. Para que isso funcione, o servi√ßo precisa iniciar como <code>root</code> (o <code>docker-compose.yml</code> foi atualizado para iniciar como root por padr√£o). O entrypoint tentar√° executar <code>chown</code> sobre <code>/home/pwuser/app</code> e ent√£o executar√° o comando do container como <code>pwuser</code>.</p><p>Para aplicar todas as mudan√ßas (Dockerfile, entrypoint e compose), reconstrua o container:</p><p><pre><code class="language-bash"><h1>Na raiz do projeto</h1><br>docker-compose -f .devcontainer/docker-compose.yml up --build<br></code></pre></p><p>Depois abra o projeto no VS Code com Remote - Containers e verifique se agora √© poss√≠vel salvar em <code>.devcontainer</code> sem erro de permiss√£o.</p><p><h2>‚öôÔ∏è Configura√ß√£o de Gerenciadores de Pacotes</h2></p><p><h3>Yarn (Principal)</h3></p><p>Este projeto usa <strong>Yarn</strong> como gerenciador principal. Todos os scripts s√£o otimizados para Yarn:</p><p><pre><code class="language-bash">yarn install           # Instalar depend√™ncias<br>yarn test:e2e          # Executar testes<br>yarn allure:serve      # Servir relat√≥rio Allure<br></code></pre></p><p><h3>npm (Dispon√≠vel para instala√ß√µes globais)</h3></p><p>O Dev Container tamb√©m est√° configurado para permitir instala√ß√µes globais do npm sem sudo:</p><p><li><code>NPM_CONFIG_PREFIX=/home/pwuser/.npm-global</code> - diret√≥rio para pacotes globais</li><br><li>PATH atualizado para incluir <code>/home/pwuser/.npm-global/bin</code></li><br><li>Configura√ß√£o persistida no <code>.zshrc</code> do usu√°rio</li></p><p>Isso permite executar comandos como:</p><p><pre><code class="language-bash">npm install -g <pacote><br>npm install -g npm@latest<br></code></pre></p><p>Sem receber erros EACCES (permission denied).</p><p>> ‚ö†Ô∏è <strong>Importante</strong>: Use Yarn para depend√™ncias do projeto e npm apenas para instala√ß√µes globais.</p><p><h2>üêö Shell padr√£o</h2></p><p>O container est√° configurado para usar <strong>zsh</strong> como shell padr√£o em vez do bash. Isso inclui:</p><p><li>Zsh instalado durante a build da imagem</li><br><li><strong>Oh My Zsh</strong> instalado automaticamente com tema "devcontainers"</li><br><li>Configurado como shell padr√£o para o usu√°rio <code>pwuser</code></li><br><li>Configura√ß√µes do npm aplicadas ao <code>.zshrc</code></li><br><li>Features do Dev Container para plugins e hist√≥rico do zsh</li></p><p><h3>Oh My Zsh Features</h3></p><p>O Oh My Zsh fornece:</p><p><li>Centenas de plugins √∫teis</li><br><li>Temas visuais atraentes</li><br><li>Auto-complete inteligente</li><br><li>Aliases √∫teis para desenvolvimento</li><br><li>Hist√≥rico de comandos melhorado</li></p><p><h2>üéØ Testes com Playwright e Allure Report</h2></p><p>Este projeto est√° configurado com <strong>Playwright** para testes end-to-end e **Allure Report</strong> para gera√ß√£o de relat√≥rios visuais detalhados.</p><p><h3>Configura√ß√£o do Allure</h3></p><p>O Allure Report foi integrado com os seguintes componentes:</p><p><li><strong>allure-playwright</strong>: Plugin para integra√ß√£o com Playwright</li><br><li><strong>allure-commandline</strong>: CLI global para gerar e servir relat√≥rios</li><br><li><strong>Configura√ß√£o dual</strong>: HTML nativo + Allure no <code>playwright.config.ts</code></li></p><p><h3>Scripts Dispon√≠veis</h3></p><p><pre><code class="language-bash"><h1>Executar testes normalmente (gera relat√≥rios HTML e Allure)</h1><br>yarn test:e2e</p><p><h1>Executar testes com relat√≥rio Allure apenas</h1><br>yarn test:allure</p><p><h1>Limpar + executar testes + abrir relat√≥rio</h1><br>yarn test:allure-clean</p><p><h1>Gerar relat√≥rio Allure a partir dos resultados</h1><br>yarn allure:generate</p><p><h1>Servir relat√≥rio Allure no navegador</h1><br>yarn allure:serve</p><p><h1>Abrir Playwright Codegen</h1><br>yarn codegen<br></code></pre></p><p><h3>Playwright Codegen</h3></p><p>O projeto inclui um script automatizado para abrir o <strong>Playwright Codegen</strong>:</p><p><pre><code class="language-bash"><h1>Script direto (DevContainer)</h1><br>./codegen.sh</p><p><h1>Via Yarn (Local ou DevContainer)</h1><br>yarn codegen<br></code></pre></p><p>O codegen permite:</p><p><li>Grava√ß√£o autom√°tica de intera√ß√µes</li><br><li>Gera√ß√£o de c√≥digo de teste</li><br><li>Inspe√ß√£o de elementos</li><br><li>Depura√ß√£o visual</li></p><p><h3>Usando Allure nos Testes</h3></p><p>Exemplo de uso das anota√ß√µes Allure:</p><p><pre><code class="language-typescript">import { test, expect } from "@playwright/test";<br>import {<br>    epic,<br>    feature,<br>    story,<br>    severity,<br>    description,<br>    step,<br>    attachment,<br>    parameter,<br>} from "allure-js-commons";</p><p>test("Exemplo com Allure", async ({ page }) => {<br>    await epic("M√≥dulo Principal");<br>    await feature("Funcionalidade de Login");<br>    await story("Login com credenciais v√°lidas");<br>    await severity("critical");<br>    await description("Teste de login b√°sico");</p><p>    await step("Navegar para login", async () => {<br>        await page.goto("/login");<br>    });</p><p>    await step("Preencher formul√°rio", async () => {<br>        await page.fill("#username", "usuario");<br>        await page.fill("#password", "senha");<br>    });</p><p>    await step("Verificar sucesso", async () => {<br>        await expect(page.locator(".success")).toBeVisible();<br>    });</p><p>    // Adicionar anexos<br>    await attachment("Screenshot", await page.screenshot(), "image/png");<br>    await parameter("Browser", "Chromium");<br>});<br></code></pre></p><p><h3>Estrutura de Relat√≥rios</h3></p><p>Os relat√≥rios s√£o organizados da seguinte forma:</p><p><pre><code class="language-">üìÅ allure-results/    # Dados brutos dos testes<br>üìÅ allure-report/     # Relat√≥rio HTML gerado<br>üìÅ test-results/      # Screenshots e v√≠deos<br>üìÅ playwright-report/ # Relat√≥rio HTML nativo<br></code></pre></p><p><h3>Allure em Ambiente DevContainer</h3></p><p>O projeto est√° configurado para funcionar em ambiente headless (sem interface gr√°fica). Para usar o Allure:</p><p>1. <strong>Configurar ambiente</strong> (primeira vez):</p><p>   <pre><code class="language-bash">   ./setup-allure.sh<br>   </code></pre></p><p>2. <strong>Executar testes e gerar dados</strong>:</p><p>   <pre><code class="language-bash">   yarn test:e2e<br>   </code></pre></p><p>3. <strong>Gerenciar servidor Allure</strong>:</p><p>   <pre><code class="language-bash">   yarn allure:serve      # Iniciar servidor<br>   yarn allure:status     # Verificar status<br>   yarn allure:restart    # Reiniciar servidor<br>   yarn allure:stop       # Parar servidor<br>   </code></pre></p><p>4. <strong>Acessar no navegador</strong>:</p><p>   - O relat√≥rio estar√° dispon√≠vel em <code>http://localhost:4040</code><br>   - Use o Simple Browser do VS Code ou acesse externamente</p><p>5. <strong>Workflow completo</strong>:</p><p>   <pre><code class="language-bash">   yarn test:allure       # Testa + inicia servidor<br>   yarn test:allure-clean # Limpa + testa + inicia servidor<br>   </code></pre></p><p>6. <strong>Gerenciamento avan√ßado</strong>:</p><p>   <pre><code class="language-bash">   ./manage-allure.sh 4041 serve    # Porta personalizada<br>   ./manage-allure.sh 4040 status   # Verificar status<br>   ./manage-allure.sh --help        # Ver todas as op√ß√µes<br>   </code></pre></p><p><h3>Anota√ß√µes Allure Dispon√≠veis</h3></p><p><li><strong><code>epic()</code></strong>: Agrupa funcionalidades de alto n√≠vel</li><br><li><strong><code>feature()</code></strong>: Funcionalidade espec√≠fica</li><br><li><strong><code>story()</code></strong>: Cen√°rio de usu√°rio</li><br><li><strong><code>severity()</code></strong>: Criticidade (blocker, critical, normal, minor, trivial)</li><br><li><strong><code>description()</code></strong>: Descri√ß√£o detalhada</li><br><li><strong><code>step()</code></strong>: Passos individuais</li><br><li><strong><code>attachment()</code></strong>: Anexos (screenshots, logs, etc.)</li><br><li><strong><code>parameter()</code></strong>: Par√¢metros de teste</li></p><p>> <strong>Nota</strong>: As fun√ß√µes Allure agora s√£o importadas diretamente do <code>allure-js-commons</code> em vez da API depreciada <code>allure-playwright</code>.</p><p><h3>Workflow Completo</h3></p><p>1. <strong>Desenvolver testes</strong> com anota√ß√µes Allure<br>2. <strong>Executar testes</strong>: <code>yarn test:allure</code><br>3. <strong>Gerar relat√≥rio</strong>: <code>yarn allure:generate</code><br>4. <strong>Visualizar resultados</strong>: <code>yarn allure:serve</code><br>5. <strong>Workflow limpo</strong>: <code>yarn test:allure-clean</code> (limpa + testa + visualiza)</p><p>O relat√≥rio Allure oferece:</p><p><li>Timeline de execu√ß√£o</li><br><li>Gr√°ficos de tend√™ncias</li><br><li>Categoriza√ß√£o de falhas</li><br><li>Hist√≥rico de execu√ß√µes</li><br><li>Screenshots autom√°ticos</li><br><li>Logs detalhados</li></p><p><h3>Troubleshooting Allure</h3></p><p><strong>Problema: "Address already in use"</strong></p><p><pre><code class="language-bash"><h1>Solu√ß√£o: parar o servidor existente</h1><br>yarn allure:stop<br>yarn allure:serve<br></code></pre></p><p><strong>Problema: "Could not serve the report"</strong></p><p><pre><code class="language-bash"><h1>Verificar se h√° dados de teste</h1><br>ls -la allure-results/</p><p><h1>Executar testes primeiro</h1><br>yarn test:e2e<br>yarn allure:serve<br></code></pre></p><p><strong>Problema: Java headless n√£o funciona</strong></p><p><pre><code class="language-bash"><h1>Reconfigurar ambiente</h1><br>./setup-allure.sh<br>yarn allure:restart<br></code></pre></p><p><strong>Problema: Permiss√µes ao limpar resultados</strong></p><p><pre><code class="language-bash"><h1>Usar comando de limpeza com sudo</h1><br>yarn allure:clean</p><p><h1>Ou corrigir permiss√µes manualmente</h1><br>sudo chown -R $(id -u):$(id -g) allure-results allure-report<br></code></pre></p><p><strong>Verificar logs do servidor</strong></p><p><pre><code class="language-bash">tail -f allure-server.log<br></code></pre></p><p><h2>üåê Ambientes de Desenvolvimento</h2></p><p><h3>Compara√ß√£o: DevContainer vs Local</h3></p><p>| Caracter√≠stica | DevContainer | Local (VS Code/Eclipse) |<br>|---------------|--------------|-------------------------|<br>| Configura√ß√£o inicial | Autom√°tica | Manual |<br>| Depend√™ncias do SO | Pr√©-instaladas | Requer instala√ß√£o manual |<br>| Oh My Zsh | ‚úÖ Inclu√≠do | ‚ùå N√£o dispon√≠vel |<br>| Aliases personalizados | ‚úÖ Inclu√≠do | ‚ùå N√£o dispon√≠vel |<br>| Isolamento | ‚úÖ Completo | ‚ùå Usa ambiente do host |<br>| Performance | Boa | Excelente |<br>| Portabilidade | ‚úÖ Alta | ‚ö†Ô∏è Depende do SO |</p><p><h3>Quando usar cada op√ß√£o?</h3></p><p><strong>Use DevContainer se</strong>:<br><li>Quer ambiente configurado automaticamente</li><br><li>Trabalha em equipe (padroniza√ß√£o)</li><br><li>Precisa de isolamento de depend√™ncias</li><br><li>Usa Linux/macOS ou WSL2</li></p><p><strong>Use desenvolvimento local se</strong>:<br><li>Prefere n√£o usar Docker</li><br><li>Tem ambiente Node.js j√° configurado</li><br><li>Precisa de m√°xima performance</li><br><li>Trabalha sozinho no projeto</li></p><p><h2>üìö Recursos Adicionais</h2></p><p><li><a href="https://playwright.dev/">Documenta√ß√£o do Playwright</a></li><br><li><a href="https://docs.qameta.io/allure/">Documenta√ß√£o do Allure Report</a></li><br><li><a href="https://www.typescriptlang.org/docs/">Guia de TypeScript</a></li><br><li><a href="https://yarnpkg.com/">Yarn Documentation</a></li><br><li><a href="https://code.visualstudio.com/docs/devcontainers/containers">VS Code DevContainers</a></li></ul></p><p><h2>üìÑ Licen√ßa</h2></p><p>Este projeto est√° sob a licen√ßa MIT. Consulte o arquivo LICENSE para mais detalhes.</p>    </div>
  </div>
</body>
</html>
